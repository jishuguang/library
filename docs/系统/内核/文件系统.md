# 文件系统

## Overview

### Filesystem Types

Disk-based filesystem: FAT, EXT2/3, ...
Virtual filesystem: proc, ...
Network filesystem

### The Common File Model

Inodes
- elements
    - metadata
    - data segment
- entry elements
    - number
    - name

Links
- symbolic (soft)
- hard

Programing interface
- system call: open/close
- file descriptor
- struct file
- access mode

## Structure of the VFS

### Inode

struct inode (in memory)
- basic info
    - atime/mtime/ctime
    - size/blocks
    - ino/count/nlink
    - mode/uid/gid
- inode operations
    - i_op: create/lookup/link/mkdir/rename/getattr/...
    - i_fop

### Process-specific info

struct task_struct
- struct file_struct
    - struct file
        - struct path
        - struct file_operations
    - next_fd
    - struct fdtable
- struct fs_struct
    - umask
    - struct dentry: root/pwd/altroot
    - struct vfsmount: rootmnt/pwdmnt/altrootmnt
- struct nsproxy
    - struct mnt_namespace
        - struct vfsmount

### File operations

struct file_operations
- read/write
- open/release
- mmap
- ioctl
- poll
- lock
- ...

### dentry cache

struct dentry
- 