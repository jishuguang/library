# 表达式

```{mermaid}
mindmap
Expressions
    Value categories
    Operator
    Const expression
    Conversions
    Literal
```

## 基础

Every expression has:
- a static type
- a value category

## Value categories

The core categories:
- lvalue: a glvalue that is not an xvalue
- prvalue (“pure rvalue”): an expression whose evaluation
    - initializes an object or a bit-field,
    - or computes the value of the operand of an operator
- xvalue: a glvalue designating an object or bit-field whose resources can be reused

The composite categories:
- glvalue (“generalized lvalue,” which is the union of lvalue and xvalue): an expression whose evaluation determines the identity of an object, bit-field, or function (i.e., an entity that has storage)
- rvalue (the union of xvalue and prvalue)

### Temporary Materialization

It could just as well have been called “prvalue-to-xvalue conversion”: Any time a prvalue validly appears where a glvalue (which includes the xvalue case) is expected, a temporary object is created and
initialized with the prvalue (recall that prvalues are primarily “initializing values”), and the prvalue is replaced by an xvalue designating the temporary.

A temporary is materialized to be initialized with a prvalue in the following situations:
- A prvalue is bound to a reference
- A member of a class prvalue is accessed
- ......

Example:

```cpp
class X {};
X v;
X const c;

void f(X const&); // accepts an expression of any value category
void f(X&&); // accepts prvalues and xvalues only but is a better match

// for those than the previous declaration
f(v); // passes a modifiable lvalue to the first
f(c); // passes a nonmodifiable lvalue to the first f()
f(X()); // passes a prvalue (since C++17 materialized as xvalue) to the 2nd f()
f(std::move(v)); // passes an xvalue to the second f()
```